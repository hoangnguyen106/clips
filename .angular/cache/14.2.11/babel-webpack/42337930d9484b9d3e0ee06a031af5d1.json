{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/nguye/Documents/GitHub/clips/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter, SimpleChanges } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/modal.service\";\nimport * as i2 from \"src/app/services/clip.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../shared/modal/modal.component\";\nimport * as i5 from \"../../shared/input/input.component\";\nimport * as i6 from \"../../shared/alert/alert.component\";\nimport * as i7 from \"@angular/forms\";\n\nfunction EditComponent_app_alert_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-alert\", 9)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"color\", ctx_r0.alertColor);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.alertMsg);\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"opacity-50\": a0,\n    \"hover:bg-indigo-700\": a1\n  };\n};\n\nexport class EditComponent {\n  constructor(modal, clipService) {\n    this.modal = modal;\n    this.clipService = clipService;\n    this.activeClip = null;\n    this.update = new EventEmitter();\n    this.isSubmission = false;\n    this.showAlert = false;\n    this.alertColor = 'blue';\n    this.alertMsg = 'Please wait! Updating clip.';\n    this.clipID = new FormControl('');\n    this.title = new FormControl('', [Validators.required, Validators.minLength(3)] // nonNullable: true\n    );\n    this.editForm = new FormGroup({\n      title: this.title,\n      id: this.clipID\n    });\n  }\n\n  ngOnInit() {\n    this.modal.register('editClip');\n  }\n\n  ngOnChanges(changes) {\n    if (!this.activeClip) {\n      return;\n    }\n\n    this.isSubmission = false;\n    this.showAlert = false;\n    this.clipID.setValue(this.activeClip.docID);\n    this.title.setValue(this.activeClip.title);\n  }\n\n  ngOnDestroy() {\n    this.modal.unregister('editClip');\n  }\n\n  submit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (!_this.activeClip) {\n        return;\n      }\n\n      _this.isSubmission = true;\n      _this.showAlert = true;\n      _this.alertColor = 'blue';\n      _this.alertMsg = 'Please wait! Updating clip.';\n\n      try {\n        yield _this.clipService.updateClip(_this.clipID.value, _this.title.value);\n      } catch (e) {\n        _this.isSubmission = false;\n        _this.alertColor = 'red';\n        _this.alertMsg = 'Something went wrong. Try again later';\n        return;\n      }\n\n      _this.activeClip.title = _this.title.value;\n\n      _this.update.emit(_this.activeClip);\n\n      _this.isSubmission = false;\n      _this.alertColor = 'green';\n      _this.alertMsg = 'Success!';\n    })();\n  }\n\n}\n\nEditComponent.ɵfac = function EditComponent_Factory(t) {\n  return new (t || EditComponent)(i0.ɵɵdirectiveInject(i1.ModalService), i0.ɵɵdirectiveInject(i2.ClipService));\n};\n\nEditComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EditComponent,\n  selectors: [[\"app-edit\"]],\n  inputs: {\n    activeClip: \"activeClip\"\n  },\n  outputs: {\n    update: \"update\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 12,\n  vars: 8,\n  consts: [[\"modalID\", \"editClip\"], [\"heading\", \"\", 1, \"text-2xl\", \"font-bold\"], [3, \"color\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mt-4\"], [1, \"block\", \"text-xl\", \"mb-4\"], [\"placeholder\", \"Enter Title\", 3, \"control\"], [1, \"mt-4\", \"text-right\"], [\"type\", \"submit\", 1, \"inline-flex\", \"justify-center\", \"py-2\", \"px-4\", \"border\", \"border-transparent\", \"shadow-sm\", \"rounded-md\", \"text-white\", \"bg-indigo-600\", \"focus:outline-none\", 3, \"disabled\", \"ngClass\"], [3, \"color\"]],\n  template: function EditComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"app-modal\", 0)(1, \"p\", 1);\n      i0.ɵɵtext(2, \"Edit Video\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, EditComponent_app_alert_3_Template, 3, 2, \"app-alert\", 2);\n      i0.ɵɵelementStart(4, \"form\", 3);\n      i0.ɵɵlistener(\"ngSubmit\", function EditComponent_Template_form_ngSubmit_4_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"label\", 5);\n      i0.ɵɵtext(7, \"Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"app-input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 7)(10, \"button\", 8);\n      i0.ɵɵtext(11, \" Update \");\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.showAlert);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.editForm);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"control\", ctx.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.isSubmission)(\"ngClass\", i0.ɵɵpureFunction2(5, _c0, ctx.isSubmission, !ctx.isSubmission));\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgIf, i4.ModalComponent, i5.InputComponent, i6.AlertComponent, i7.ɵNgNoValidate, i7.NgControlStatusGroup, i7.FormGroupDirective],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJlZGl0LmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["EventEmitter","SimpleChanges","FormControl","FormGroup","Validators","i0","EditComponent","constructor","modal","clipService","required","minLength","title","id","clipID","ngOnInit","register","ngOnChanges","changes","activeClip","isSubmission","showAlert","setValue","docID","ngOnDestroy","unregister","submit","alertColor","alertMsg","updateClip","value","e","update","emit","selectors","inputs","outputs","features","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\nguye\\Documents\\GitHub\\clips\\src\\app\\video\\edit\\edit.component.ts","C:\\Users\\nguye\\Documents\\GitHub\\clips\\src\\app\\video\\edit\\edit.component.html"],"sourcesContent":["import {\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges,\r\n} from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport IClip from 'src/app/models/clip.model';\r\nimport { ClipService } from 'src/app/services/clip.service';\r\nimport { ModalService } from 'src/app/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'app-edit',\r\n  templateUrl: './edit.component.html',\r\n  styleUrls: ['./edit.component.css'],\r\n})\r\nexport class EditComponent implements OnInit, OnChanges, OnDestroy {\r\n  @Input() activeClip: IClip | null = null;\r\n  @Output() update = new EventEmitter();\r\n  isSubmission = false;\r\n  showAlert = false;\r\n  alertColor = 'blue';\r\n  alertMsg = 'Please wait! Updating clip.';\r\n\r\n  clipID = new FormControl('');\r\n  title = new FormControl(\r\n    '',\r\n    [Validators.required, Validators.minLength(3)]\r\n    // nonNullable: true\r\n  );\r\n\r\n  editForm = new FormGroup({\r\n    title: this.title,\r\n    id: this.clipID,\r\n  });\r\n\r\n  constructor(private modal: ModalService, private clipService: ClipService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.modal.register('editClip');\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (!this.activeClip) {\r\n      return;\r\n    }\r\n\r\n    this.isSubmission = false;\r\n    this.showAlert = false;\r\n    this.clipID.setValue(this.activeClip.docID);\r\n    this.title.setValue(this.activeClip.title);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.modal.unregister('editClip');\r\n  }\r\n\r\n  async submit() {\r\n    if (!this.activeClip) {\r\n      return;\r\n    }\r\n\r\n    this.isSubmission = true;\r\n    this.showAlert = true;\r\n    this.alertColor = 'blue';\r\n    this.alertMsg = 'Please wait! Updating clip.';\r\n\r\n    try {\r\n      await this.clipService.updateClip(this.clipID.value, this.title.value);\r\n    } catch (e) {\r\n      this.isSubmission = false;\r\n      this.alertColor = 'red';\r\n      this.alertMsg = 'Something went wrong. Try again later';\r\n      return;\r\n    }\r\n\r\n    this.activeClip.title = this.title.value;\r\n    this.update.emit(this.activeClip);\r\n\r\n    this.isSubmission = false;\r\n    this.alertColor = 'green';\r\n    this.alertMsg = 'Success!';\r\n  }\r\n}\r\n","<!-- Edit Modal -->\r\n<app-modal modalID=\"editClip\">\r\n  <p class=\"text-2xl font-bold\" heading>Edit Video</p>\r\n\r\n  <app-alert *ngIf=\"showAlert\" [color]=\"alertColor\">\r\n    <p>{{ alertMsg }}</p>\r\n  </app-alert>\r\n\r\n  <!-- Form -->\r\n  <form [formGroup]=\"editForm\" (ngSubmit)=\"submit()\">\r\n    <!-- Title -->\r\n    <div class=\"mt-4\">\r\n      <label class=\"block text-xl mb-4\">Title</label>\r\n      <app-input [control]=\"title\"\r\n        placeholder=\"Enter Title\"></app-input>\r\n    </div>\r\n\r\n    <div class=\"mt-4 text-right\">\r\n      <button [disabled]=\"isSubmission\"\r\n        [ngClass]=\"{\r\n          'opacity-50': isSubmission,\r\n          'hover:bg-indigo-700': !isSubmission\r\n        }\"\r\n        type=\"submit\"\r\n        class=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm rounded-md text-white bg-indigo-600 focus:outline-none\">\r\n        Update\r\n      </button>\r\n    </div>\r\n  </form>\r\n</app-modal>\r\n"]},"metadata":{},"sourceType":"module"}